---
title: 【SwiftUI】Toggleボタンの表示が効かなくて困った
tags:
  - SwiftUI
private: false
updated_at: '2025-10-28T22:25:05+09:00'
id: 5b8b5a8c99320de86736
organization_url_name: null
slide: false
ignorePublish: false
---
### 概要
* コンポーネントの階層関係が変わったときに修飾子が変わってないか確認する

### 発生した課題
```Swift
@State var buttonStatus: Bool = false

ZStack {
    ComponentButton { // Boolによるアイコンの更新が効いている
        // buttonStatusを更新してisPressedに渡す
    }
    ComponentView {
        
    }
}

struct ComponentButton: some View {
    @State private var isPressed: Bool = false
}
```

* ComponentViewの中にButtonを含むように仕様を変更しようとした。

```diff_swift
ZStack {
-    ComponentButton(isPressed: $isPressed) { // Boolによるアイコンの更新が効いている
-    } 
    ComponentView {
+       ComponentButton { // Boolによるアイコンの更新が効かなくなった
+       } 
    }
}

struct ComponentButton: some View {
    @State var isPressed: Bool = false
    //　省略
}
```

* Boolボタンの押下が効かなくなった。

### 解決策
* Buttonの処理をComponentに切り出した際に状態変化を制御する変数を@State変数のままにしたことがよくなかった。

```diff_swift
struct ComponentButton: some View {
-    @State var isPressed: Bool = false
+    let isPressed: Bool = false
}
```

* 自分のケースだと、`Component`内部では状態変化をする変数は`let`として宣言することが正解。
* 仕様上にこだわりがないなら`@State`ー`@Binding`で親子関係を築くことが最も安全。
