---
title: 【SwiftUI】もしかして@AppStorageってenumは保存してくれないの？
tags:
  - SwiftUI
private: false
updated_at: '2025-10-26T21:08:13+09:00'
id: d36cdea05f45e98680ae
organization_url_name: null
slide: false
ignorePublish: false
---
### 概要
* `@AppStorage`が保存に対応しているのは`UserDefaults`同様にプリミティブな値だけのよう（`String`, `Int`, `Bool`, `URL`...など）
* `enum`を保存したければ`rawValue`に変換する必要があるとのこと

### 発生したエラー

::: note alert
No exact matches in call to initializer
::: 


### 対象のコード


```Swift
    @AppStorage("targetWord") var targetWord: TargetWord = .all
    @AppStorage("answerStyle") var answerStyle: AnswerStyle = .completelyRandom
    @AppStorage("sumOfQuestion") var sumOfQuestion: SumOfQuestion = .one
    @AppStorage("checkingWay") var checkingWay: CheckingWay = .each
    @AppStorage("questionOrder") var questionOrder: QuestionOrder = .completlyRandom
    @AppStorage("questionWay") var questionWay: QuestionWay = .englishToJapanese
```

### やること

#### 値の保存
* `rawValue`をセットするだけで良い

```Swift
// enumをString型に変更
enum TargetWord: String {}

// 継承する型をenumからStringに変更。右辺に.rawValueをセット
@AppStorage("targetWord") var targetWord: String = TargetWord.all.rawValue
```

#### Getter/Setterメソッドを持つ変数を定義
* 値の`get`と`set`を初期化する際に行います

```Swift
 var targetWord: TargetWord {
    get { TargetWord(rawValue: targetWordRaw) ?? .all }
    set { targetWordRaw = newValue.rawValue }
}
```

#### enumをString型に準拠させる
```Swift
enum TargetWord: String {
    case all
    case notRememberedYet
    case alreadyRemembered
    
    var text: String {
        return switch self {
        case .all: "すべて"
        case .notRememberedYet: "覚えてない"
        case .alreadyRemembered: "覚えた"
        }
    }
}
```

* これで`enum`を無理やり`@AppStorage`に保存させました。
