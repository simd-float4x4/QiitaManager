---
title: 【TBD】.contentShapeは.background()より先に指定する | 適切な順序について
tags:
  - SwiftUI
private: false
updated_at: '2025-11-06T16:43:42+09:00'
id: 030f4f8e7e4b011c68ee
organization_url_name: null
slide: false
ignorePublish: false
---
# 発生した不具合
* `.contentShape`を設定したButtonについて、タップ領域が`Text`のみに限定されている

# 結論
* `.background`より先に`.contentShape`を指定する


# 解説
* `FPCB`メソッド（自分命名）を使う。
* `F`rame -> `P`adding -> `C`ontenetShape -> `B`ackgroundの順番で指定することを徹底。

```Swift
.frame(...)
.padding(...)
.contentShape(...)
.background(...)
```

# AIになぜか聞いた


* まずSwiftUIの実行順は上から下に順番に実行される。
    * 理解できる。
* frameで大きさを広げて、さらにpaddingで余白を広げる。
    * 理解できる。この時点でコンポーネントのサイズを決定する。
* contentShapeでShapeを指定してタップ判定をセットする
    * 理解できる。例えば`Rectangle()`であれば長方形のタップ領域をセットしてくれる
* backgroundを使って背景色を塗る。
    * 理解できる。

::: note warn
（質問）
ではなぜ`.background`でセットした後に`contentShape`をセットすると、`contentShape`のタップ領域が`Button.text`のみに限定されるのか。この流れであれば背景色を塗ってからタップ領域セットでも同様に作用するのではないか？
:::

> ひとことで言うと、**押せる範囲を先に決定してから塗る**です！

なるほど？

::: note warn
（質問）
* 上から順番に実行されるのであれば、背景色を塗ってから押せる範囲を決定してもきちんと動作するのではないか？逆にcontentShape -> backgroundの順番だと、押せなくなるのではないか
:::

> backgroundはタップを無効化しない。
contentShapeは「押せる形」を先に決める必要がある。


うーん？回答になってないような。

# 結論

AIによる解説がきちんと自分に落とし込めないので、TBDとして引き続き調査します。

ひとまず
* 　**「押せる形を決めてから塗る」ということを抑える**
* FPCPメソッドのことを覚えておく
```Swift
.frame(...)
.padding(...)
.contentShape(...)
.background(...)
```

ということを押さえておく必要がありそうです。
