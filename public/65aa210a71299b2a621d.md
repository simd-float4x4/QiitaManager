---
title: Singletonを用いてアプリ全体のSettingを適用する
tags:
  - SwiftUI
private: false
updated_at: '2025-10-26T21:08:36+09:00'
id: 65aa210a71299b2a621d
organization_url_name: null
slide: false
ignorePublish: false
---
### 概要
* シングルトンパターンを用いることで、アプリの随所から処理を呼び出すことが出来るようになる

### コード

```Swift
// finalを付けることで他のクラスなどから継承させないようにする
final public class QuizManager {
    // staticを付けることでいちいちインスタンス化しなくて済む
    public static let shared = QuizManager()

    private init() {}

    // 省略
}
```

### こんな使い方ができる

```QuizManager.swift
@AppStorage("answerStyle") var answerStyleRaw: String = AnswerStyle.completelyRandom.rawValue
 
var answerStyle: AnswerStyle {
    get { AnswerStyle(rawValue: answerStyleRaw) ?? .completelyRandom }
    set { answerStyleRaw = newValue.rawValue }
}
 
func updateCurrentStatus (
    answerStyle: AnswerStyle
) {
    self.answerStyle = answerStyle
}

enum AnswerStyle: String {
    case completelyRandom
    case alignSpeeches
    case notDisplay
    
    var text: String {
        return switch self {
        case .completelyRandom: "完全にランダム"
        case .alignSpeeches: "品詞をなるべく揃える"
        case .notDisplay: "選択肢を表示しない"
        }
    }
}
```

```Swift
let manager: QuizManager = QuizManager.shared

// 選択肢を完全にランダムに出現させる状態なら
if manager.answerStyle == .completelyRandom {
    // 正解の選択肢を含めてランダムな選択肢を返却する
    answerArray = makeRandomArray(correctChoices: wordData[index].info.meaning)
}
```
