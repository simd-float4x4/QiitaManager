---
title: 【SwiftData】ビルドしたらモデルファイルの中で@storageRestrictionsエラーが発生した
tags:
  - Swift
  - SwiftUI
  - SwiftData
private: false
updated_at: '2025-11-01T14:55:53+09:00'
id: b6a4ce2b69a95dc131eb
organization_url_name: null
slide: false
ignorePublish: false
---
### 概要
* SwiftDataコンパイル時にこの画面でエラーが発生した。
* おそらく何かしらのコードがSwiftDataの求める構造体の定義に合致していないから

### 発生したエラー

```Swift
 @storageRestrictions(accesses: _$backingData, initializes: _priority)
    init(initialValue) {
        _$backingData.setValue(forKey: \.priority, to: initialValue)
        _priority = _SwiftDataNoType()
    }
    get {
        _$observationRegistrar.access(self, keyPath: \.priority)
        return self.getValue(forKey: \.priority)
    }
    set {
        _$observationRegistrar.withMutation(of: self, keyPath: \.priority) {
            self.setValue(forKey: \.priority, to: newValue)
        }
    }
```

### 解決策
* `enum`を`Int`, `Codable`に準拠させた

```diff_swift
- enum Priority: Int, Codable {
+ enum Priority: Int, Codable {
-   case low
-   case medium
-   case height
+   case low = 0
+   case medium = 1
+   case height = 2
}
```
