---
title: PushReplacementを使うと黒い画面に戻ることがあるというお話
tags:
  - Dart
  - Flutter
private: false
updated_at: '2025-10-14T22:18:51+09:00'
id: 310d713604b94df71033
organization_url_name: null
slide: false
ignorePublish: false
---
### エラー
* 昔話なので詳細なコードを忘れてしまったが、`pushReplacement()`を用いて画面遷移を定義。
* 呼び出し先から呼び出し元に戻る際に、元の画面がなく、黒い画面へと遷移する。


```parent.dart
// push()を用いて画面遷移
Navigator.of(context).push(
  MaterialPageRoute(builder: (context) => ChildScreenA()),
);

// pushReplacementを用いて画面遷移
Navigator.of(context).pushReplacement(
  MaterialPageRoute(builder: (context) => ChildScreenB()),
);
```


### 原因
* `push`と`pushReplacement`には明確な挙動の違いがあるため。

| push | pushReplacement |
|:-:|:-:|
| 遷移元画面の上に画面を重ねる | 遷移元画面を破棄して画面を表示する |

* `push`の場合だと画面がn層重なる可能性があるのに対して、`pushReplacement`は必ず1層しか表示されない。
* 画面遷移に失敗すると、呼び出す画面が存在しないために黒い画面が表示されることがある。
